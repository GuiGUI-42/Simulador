<!DOCTYPE html>
<html>
<head>
    <title>Página 3 - Gráfico de Nyquist</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <style>
        body { font-family: sans-serif; }
        .header { background: #f4f4f4; padding: 10px; text-align: center; }
        label { display: block; margin-top: 8px; }
        .section { margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="header">
        <a href="/">Página Principal</a> | <a href="/pagina2">Página 2</a> | <a href="/pagina3">Página 3</a>  | <a href="/pagina4">Página 4</a>
       
    </div>

    <h1>Configuração da Planta e Gráfico de Nyquist</h1>

    <div class="section">
        <label>Polo:</label>
        <input type="range" id="p1_1" min="-10" max="10" step="0.1" value="-1" oninput="sincronizarValor('p1_1', 'p1_1_num', this.value)">
        <input type="number" id="p1_1_num" min="-10" max="10" step="0.1" value="-1" oninput="sincronizarValor('p1_1', 'p1_1_num', this.value)">

        <label>Zero:</label>
        <input type="range" id="z_1" min="-10" max="10" step="0.1" value="0" oninput="sincronizarValor('z_1', 'z_1_num', this.value)">
        <input type="number" id="z_1_num" min="-10" max="10" step="0.1" value="0" oninput="sincronizarValor('z_1', 'z_1_num', this.value)">
    </div>

    <div class="section">
        <h3>Gráfico de Nyquist</h3>
        <img id="nyquist_plot" src="" style="max-width: 100%; border: 1px solid #ccc;">
    </div>

    <script>
        async function atualizarNyquist() {
            const data = {
                p1_1: document.getElementById("p1_1").value,
                z_1: document.getElementById("z_1").value
            };

            const res = await fetch('/atualizar_nyquist', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            const json = await res.json();

            // Atualiza o gráfico de Nyquist
            document.getElementById("nyquist_plot").src = json.nyquist_url;
        }

        function sincronizarValor(sliderId, numberId, valor) {
            document.getElementById(sliderId).value = valor;
            document.getElementById(numberId).value = valor;
            atualizarNyquist();
        }

        window.onload = () => {
            atualizarNyquist();
        };
    </script>
</body>
</html>